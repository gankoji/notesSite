<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.9b87e697c172e14543a6.css" id="gatsby-global-css">.tippy-box[data-animation=shift-away][data-state=hidden]{opacity:0}.tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=top]{transform:translateY(10px)}.tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=bottom]{transform:translateY(-10px)}.tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=left]{transform:translateX(10px)}.tippy-box[data-animation=shift-away][data-state=hidden][data-placement^=right]{transform:translateX(-10px)}</style><meta name="generator" content="Gatsby 2.31.1"/><link as="script" rel="preload" href="/webpack-runtime-37c9b82e3d10bcf09c59.js"/><link as="script" rel="preload" href="/framework-e8cdf4427d365cd536e7.js"/><link as="script" rel="preload" href="/commons-be970e6fbbe9ef5d4ece.js"/><link as="script" rel="preload" href="/app-4bc410971aa2098da91c.js"/><link as="script" rel="preload" href="/styles-c4fa86dfd4ad05097eee.js"/><link as="script" rel="preload" href="/component---node-modules-gatsby-theme-andy-src-templates-note-js-5d0d405023f6174bfb21.js"/><link as="fetch" rel="preload" href="/page-data\debating-the-monorepo\page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data\app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="n0ecfm">body{color:var(--theme-ui-colors-text,#333);background-color:var(--theme-ui-colors-background,#fff);}</style><style data-emotion-css="1fthmpb">*{box-sizing:border-box;}body{margin:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;line-height:1.5;font-weight:400;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="bya3fr">.css-bya3fr{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100vh;min-height:100vh;}</style><style data-emotion-css="1ehwac2">.css-1ehwac2{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100vh;min-height:100vh;}</style><div class="css-1ehwac2"><header><style data-emotion-css="b38cxh">.css-b38cxh{border-bottom:1px solid;border-color:var(--theme-ui-colors-gray,#dadada);}</style><style data-emotion-css="bjpuxf">.css-bjpuxf{box-sizing:border-box;margin:0;min-width:0;padding-top:8px;padding-bottom:8px;padding-left:16px;padding-right:16px;border-bottom:1px solid;border-color:var(--theme-ui-colors-gray,#dadada);}</style><div class="css-bjpuxf"><style data-emotion-css="12j45zb">.css-12j45zb{font-weight:700;color:var(--theme-ui-colors-text,#333);-webkit-text-decoration:none;text-decoration:none;}</style><a class="css-12j45zb" href="/">Jake&#x27;s Notes</a></div></header><style data-emotion-css="lxqeq9">.css-lxqeq9{-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow-y:hidden;}@media screen and (min-width:768px){.css-lxqeq9{overflow-x:auto;}}</style><style data-emotion-css="1xopae2">.css-1xopae2{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;overflow-y:hidden;}@media screen and (min-width:768px){.css-1xopae2{overflow-x:auto;}}</style><div class="css-1xopae2"><style data-emotion-css="9ms8w3">.css-9ms8w3{min-width:unset;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-transition-duration:100px;transition-duration:100px;width:100%;}@media screen and (min-width:640px){.css-9ms8w3{width:100%;}}@media screen and (min-width:768px){.css-9ms8w3{-webkit-transition:width;transition:width;width:1152px;}}</style><style data-emotion-css="1806l1h">.css-1806l1h{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-width:unset;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-transition-duration:100px;transition-duration:100px;width:100%;}@media screen and (min-width:640px){.css-1806l1h{width:100%;}}@media screen and (min-width:768px){.css-1806l1h{-webkit-transition:width;transition:width;width:1152px;}}</style><div class="note-columns-container css-1806l1h"><style data-emotion-css="q7ai65">.css-q7ai65{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;overflow-y:auto;max-width:100%;width:100%;left:0;right:-585px;}@media screen and (min-width:640px){.css-q7ai65{max-width:100%;width:100%;}}@media screen and (min-width:768px){.css-q7ai65{position:-webkit-sticky;position:sticky;max-width:100vw;width:576px;}}</style><style data-emotion-css="108dckd">.css-108dckd{box-sizing:border-box;margin:0;min-width:0;padding-left:16px;padding-right:16px;background-color:var(--theme-ui-colors-background,#fff);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;overflow-y:auto;max-width:100%;width:100%;left:0;right:-585px;}@media screen and (min-width:640px){.css-108dckd{max-width:100%;width:100%;}}@media screen and (min-width:768px){.css-108dckd{position:-webkit-sticky;position:sticky;max-width:100vw;width:576px;}}</style><div class="note-container css-108dckd"><style data-emotion-css="qkbcne">.css-qkbcne{display:none;-webkit-transition:opacity;transition:opacity;-webkit-transition-duration:100px;transition-duration:100px;opacity:0;}@media screen and (min-width:640px){.css-qkbcne{display:none;}}@media screen and (min-width:768px){.css-qkbcne{display:block;}}</style><style data-emotion-css="1d4xrqf">.css-1d4xrqf{box-sizing:border-box;margin:0;min-width:0;display:none;-webkit-transition:opacity;transition:opacity;-webkit-transition-duration:100px;transition-duration:100px;opacity:0;}@media screen and (min-width:640px){.css-1d4xrqf{display:none;}}@media screen and (min-width:768px){.css-1d4xrqf{display:block;}}</style><div class="css-1d4xrqf"><style data-emotion-css="1557ki8">.css-1557ki8{position:absolute;z-index:10;-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);-webkit-transform-origin:left;-ms-transform-origin:left;transform-origin:left;}</style><style data-emotion-css="1vxydnz">.css-1vxydnz{box-sizing:border-box;margin:0;min-width:0;padding-bottom:8px;position:absolute;z-index:10;-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg);-webkit-transform-origin:left;-ms-transform-origin:left;transform-origin:left;}</style><div class="css-1vxydnz"><style data-emotion-css="y5zp6v">.css-y5zp6v{font-weight:700;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-text,#333);}</style><a class="css-y5zp6v" href="/\debating-the-monorepo/debating-the-monorepo">debating-the-monorepo</a></div></div><style data-emotion-css="1jnayfl">.css-1jnayfl{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100%;-webkit-transition:opacity;transition:opacity;-webkit-transition-duration:100px;transition-duration:100px;opacity:1;}</style><style data-emotion-css="1xvlbb1">.css-1xvlbb1{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100%;-webkit-transition:opacity;transition:opacity;-webkit-transition-duration:100px;transition-duration:100px;opacity:1;}</style><div class="css-1xvlbb1"><style data-emotion-css="1rr4qq7">.css-1rr4qq7{-webkit-flex:1;-ms-flex:1;flex:1;}</style><div class="css-1rr4qq7"><style data-emotion-css="1ebprri">.css-1ebprri{margin-top:16px;margin-bottom:16px;}</style><style data-emotion-css="xz3bt">.css-xz3bt{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:32px;margin-top:16px;margin-bottom:16px;}</style><h1 class="css-xz3bt">debating-the-monorepo</h1><style data-emotion-css="1ccy11i">.css-1ccy11i{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:32px;color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:32px;}</style><h1 class="css-1ccy11i">To monorepo, or kludge</h1><style data-emotion-css="19iowwu">.css-19iowwu{color:#333;color:#333;}</style><p class="css-19iowwu"><style data-emotion-css="18ci6ln">.css-18ci6ln{color:#3182ce;-webkit-text-decoration:none;text-decoration:none;}.css-18ci6ln:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="css-18ci6ln" href="https://github.com/actions/checkout">actions/checkout: Action for checking out a repo (github.com)</a> does not support pulling from a different repo than triggered the action. Thus, if I want this to run under Github, I&#x27;m either going to have to push the two repositories together (and of course privatize the code that builds the notesSite), or figure out some way to kludge it together using a docker container. I&#x27;m no expert in docker, but putting together a simple linux based container that can pull from two repos and push to the second, with a script or two in between, isn&#x27;t terribly difficult. The difficult part will be <style data-emotion-css="embvvb">.css-embvvb{color:#3182ce;padding-left:2px;padding-right:2px;margin-left:-2px;margin-right:-2px;border-radius:4px;color:#3182ce;-webkit-text-decoration:none;text-decoration:none;}.css-embvvb:hover{background-color:#fafafc;}.css-embvvb:focus{background-color:#fafafc;}.css-embvvb:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="css-embvvb" href="/\debating-the-monorepo/%5Cmanaging-secrets-in-docker">Managing secrets in Docker</a>, which I have yet to delve into. I&#x27;d imagine it can be pretty straightforward, but I&#x27;m not sure yet. </p><style data-emotion-css="cq6ij1">.css-cq6ij1{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:24px;color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:24px;}</style><h2 class="css-cq6ij1">Monorepo</h2><p class="css-19iowwu">This would be the quickest/easiest way to get this off the ground, and I&#x27;m honestly leaning toward it quite heavily. Basically, I copy over the notesSite repo in its entirety to the private repo, modify the copy script a little bit, shape the deploy action definition to include running my scripts and my build, and bam, we&#x27;re done. </p><p class="css-19iowwu">Downside to this is a) abandoning the public notesSite repo, b) dirtying up the private repo. I do think that both points can be ameliorated, to an extent, by submoduling the notesSite repo, but I wonder how that will work out in terms of public-ness. It does look like submoduling doesn&#x27;t <em class="css-0">really</em> sort out all of the difficulties in secrets management, but it could still be a useful path forward. </p><style data-emotion-css="jgtg8i">.css-jgtg8i{color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:20px;color:#333;font-family:inherit;line-height:1.125;font-weight:700;font-size:20px;}</style><h3 class="css-jgtg8i">More on Submoduling</h3><p class="css-19iowwu">Looks like the original way I thought it up might be possible: rather than trying to deal with the hassle of pulling from a private repo and pushing to a public-read/private-write repo, where I need to have secrets for both, I can simply do the clone/submodule --init the other way around: pull the public-read repo (no secret needed), and run those scripts as a part of the pipeline on the private repo. Done. </p><h2 class="css-cq6ij1">Multirepo</h2><p class="css-19iowwu">Now that I&#x27;ve through through the above, I don&#x27;t think this strategy has as many benefits as it seemed to a few minutes ago. Even if I keep the repos separate, I still have to deal with the hassle of managing secrets (certificates) for both of them. This is easy enough on my local dev box, but of course secrets management turns into a huge hassle once you move to cloud agents. </p></div><style data-emotion-css="rl6otz">.css-rl6otz{border-radius:8px;}</style><style data-emotion-css="19qk7ja">.css-19qk7ja{box-sizing:border-box;margin:0;min-width:0;padding:16px;margin-bottom:8px;background-color:#fafafc;color:#718096;border-radius:8px;}</style><div class="css-19qk7ja"><style data-emotion-css="rp57em">.css-rp57em{box-sizing:border-box;margin:0;min-width:0;font-family:inherit;font-weight:700;line-height:1.125;color:#718096;}</style><h4 class="css-rp57em">Referred in</h4><style data-emotion-css="19idom">.css-19idom{margin-bottom:8px;}</style><div class="css-19idom"><style data-emotion-css="ovwx2x">.css-ovwx2x{-webkit-text-decoration:none;text-decoration:none;color:#718096;}.css-ovwx2x:hover{color:#333;}</style><a class="css-ovwx2x" href="/continuous-deployment-for-my-notessite"><style data-emotion-css="1jpm9pd">.css-1jpm9pd{padding-top:8px;padding-bottom:8px;}</style><div class="css-1jpm9pd"><style data-emotion-css="18iut6x">.css-18iut6x{font-size:16px;margin:0;color:#718096;}</style><style data-emotion-css="ouorfz">.css-ouorfz{color:#333;font-size:16px;margin:0;color:#718096;}</style><p class="css-ouorfz">continuous-deployment-for-my-notessite</p><style data-emotion-css="uvfa58">.css-uvfa58{font-size:14px;margin:0;color:#718096;}</style><style data-emotion-css="1hddlwb">.css-1hddlwb{color:#333;font-size:14px;margin:0;color:#718096;}</style><p class="css-1hddlwb">Automate the Boring Stuff Tonight, I&#x27;m looking into ways to automate the publishing of my notes site. As I go over in detail in  The Notes…</p></div></a></div><style data-emotion-css="4erca1">.css-4erca1{margin-left:auto;margin-right:auto;width:64px;}</style><hr class="css-4erca1"/><style data-emotion-css="1cev0y9">.css-1cev0y9{margin:0;font-size:14px;}</style><p class="css-1cev0y9">If you think this note resonated, be it positive or negative, send me a<!-- --> <style data-emotion-css="15vz5gh">.css-15vz5gh{-webkit-text-decoration:underline;text-decoration:underline;color:#718096;}</style><style data-emotion-css="lnu7pe">.css-lnu7pe{color:#3182ce;-webkit-text-decoration:none;text-decoration:none;-webkit-text-decoration:underline;text-decoration:underline;color:#718096;}.css-lnu7pe:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="https://twitter.com/messages/compose?recipient_id=" class="css-lnu7pe">direct message</a> <!-- -->on Twitter or an<!-- --> <a href="#" class="css-lnu7pe">email</a> <!-- -->and we can talk.</p></div></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/\debating-the-monorepo";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-37f01279e2e40246c3e2.js"],"app":["/app-4bc410971aa2098da91c.js"],"component---node-modules-gatsby-theme-andy-src-templates-note-js":["/component---node-modules-gatsby-theme-andy-src-templates-note-js-5d0d405023f6174bfb21.js"]};/*]]>*/</script><script src="/polyfill-37f01279e2e40246c3e2.js" nomodule=""></script><script src="/component---node-modules-gatsby-theme-andy-src-templates-note-js-5d0d405023f6174bfb21.js" async=""></script><script src="/styles-c4fa86dfd4ad05097eee.js" async=""></script><script src="/app-4bc410971aa2098da91c.js" async=""></script><script src="/commons-be970e6fbbe9ef5d4ece.js" async=""></script><script src="/framework-e8cdf4427d365cd536e7.js" async=""></script><script src="/webpack-runtime-37c9b82e3d10bcf09c59.js" async=""></script></body></html>